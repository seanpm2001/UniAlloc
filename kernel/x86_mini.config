# support multi-processing
CONFIG_SMP=y

# support initrd
CONFIG_BLK_DEV_INITRD=y
CONFIG_DEVTMPFS=y

# default to no filesystems support
CONFIG_EXT4_FS=n
CONFIG_MISC_FILESYSTEMS=n
CONFIG_NETWORK_FILESYSTEMS=n

# enable loop device for fs image mounting
CONFIG_BLK_DEV_LOOP=y
CONFIG_BLK_DEV_LOOP_MIN_COUNT=1

# disable unnecessary features
CONFIG_LEGACY_PTYS=n

# enable kernel module support
CONFIG_MODULES=y

# kvm kernel module 
CONFIG_HIGH_RES_TIMERS=y
CONFIG_NET=y
CONFIG_MULTIUSER=y
CONFIG_X86_LOCAL_APIC=y

CONFIG_HAVE_KVM=y
CONFIG_HAVE_KVM_IRQCHIP=y
CONFIG_HAVE_KVM_IRQFD=y
CONFIG_HAVE_KVM_IRQ_ROUTING=y
CONFIG_HAVE_KVM_EVENTFD=y
CONFIG_KVM_MMIO=y
CONFIG_KVM_ASYNC_PF=y
CONFIG_HAVE_KVM_MSI=y
CONFIG_HAVE_KVM_CPU_RELAX_INTERCEPT=y
CONFIG_KVM_VFIO=y
CONFIG_KVM_GENERIC_DIRTYLOG_READ_PROTECT=y
CONFIG_KVM_COMPAT=y
CONFIG_HAVE_KVM_IRQ_BYPASS=y
CONFIG_HAVE_KVM_NO_POLL=y
CONFIG_KVM_XFER_TO_GUEST_WORK=y
CONFIG_VIRTUALIZATION=y
CONFIG_KVM=y
CONFIG_KVM_INTEL=y

# RCU subsystem
CONFIG_PREEMPT=n
#CONFIG_SMP=n

CONFIG_SAMPLES=y
CONFIG_RUST=y
CONFIG_SAMPLES_RUST=y
CONFIG_SAMPLE_RUST_ALLOC=m
